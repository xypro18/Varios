package pt.curso.jpa;

import java.lang.reflect.Field;

public class PersistanceContext {
	
	
	public static String obterNomeTabela(Produto p) {
		return p.getClass().getSimpleName();
	}
	
	/**
	 * "INSERT INTO <tabela> (COL1, COL2, COL3) VALUES (VAL1, VAL2, VAL3)"
	 * @param p
	 * @return
	 * @throws IllegalAccessException 
	 * @throws IllegalArgumentException 
	 */
	
	public static String generateInsert(Produto p) throws IllegalArgumentException, IllegalAccessException {
		
		StringBuilder sb = new StringBuilder();
		
		sb.append("INSERT INTO ").append(obterNomeTabela(p));
		
		Field[] atributos = p.getClass().getDeclaredFields();
		for(Field f:atributos) {
			f.setAccessible(true);
			System.out.println(f.getName());
			System.out.println(f.get(p));
		}
		return sb.toString();
	}
	
	public static void main(String...x) throws IllegalArgumentException, IllegalAccessException {
		
		Produto p = new Produto();
		p.setId(10);
		p.setNome("carica");
		p.setPreco(123.45);
		
		System.out.println(generateInsert(p));
		System.out.println(p.getClass().getDeclaredFields().length);

	}

}
